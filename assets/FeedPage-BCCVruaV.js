import{z as j,g as h,i as b,a as w,j as e,U as v,m as N,A as T,B as y,C as S,x as M,D as C}from"./index-B8Mj0rHR.js";import{a as L}from"./index-BUbBMxyp.js";import{i as k,T as F}from"./TweetLikeBtn-6Vw1ftKm.js";import{C as O,T as A}from"./TweetModals-IHs2V6gQ.js";import{S as Q,N as R}from"./NoTweets-_44y2e2N.js";import"./FormSubmitButtons-CerY2vqf.js";let m={comma(i){return m.split(i,[","],!0)},space(i){let n=[" ",`
`,"	"];return m.split(i,n)},split(i,n,o){let t=[],r="",c=!1,d=0,l=!1,u="",s=!1;for(let a of i)s?s=!1:a==="\\"?s=!0:l?a===u&&(l=!1):a==='"'||a==="'"?(l=!0,u=a):a==="("?d+=1:a===")"?d>0&&(d-=1):d===0&&n.includes(a)&&(c=!0),c?(r!==""&&t.push(r.trim()),r="",c=!1):r+=a;return(o||r!=="")&&t.push(r.trim()),t}};m.default=m;const z=()=>{const[i,{isLoading:n,isSuccess:o}]=j(),t=h(b),{register:r,handleSubmit:c,formState:{errors:d},setValue:l,watch:u}=w(),s=u("content"),a=async x=>{try{const p=await i(x);l("content","")}catch(p){console.log(p)}},g=()=>{l("content","")};let f;return n&&(f=e.jsx("span",{className:"loader"})),(!n||o)&&(f="Tweet"),e.jsxs("article",{className:"flex items-center justify-between w-full bg-black shadow-md shadow-neutral-200/50 rounded pl-4 py-4",children:[e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"w-full flex items-start",children:[e.jsx("div",{className:"flex items-center gap-x-2",children:t!=null&&t.userName?e.jsx(v,{userName:t==null?void 0:t.userName,className:"avatar w-14"}):e.jsx("p",{className:"w-12 bg-neutral-300 animate-pulse aspect-square rounded-full"})}),e.jsxs("form",{className:"flex flex-col items-start w-full mx-2",onSubmit:c(a),children:[e.jsx("div",{className:`w-full ${(s==null?void 0:s.length)===210?"border-red-500":"border-transparent"} border rounded-md px-2`,children:e.jsx(k,{maxRows:15,minRows:2,className:"resize-none w-full bg-transparent outline-none border-none placeholder:text-lg placeholder:font-normal text-white font-medium placeholder:max-sm:text-base",placeholder:"What is happening?!",maxLength:210,...r("content",{validate:x=>x.length<=200})})}),e.jsx("div",{className:`text-xs text-red-500 font-medium pt-1 ${(s==null?void 0:s.length)===210?"block":"invisible"}`,children:"Maximum character limit reached!!!"}),e.jsxs("div",{className:"w-full flex items-center justify-between gap-2",children:[e.jsx("div",{className:(s==null?void 0:s.length)>0?"visible":"invisible",children:e.jsx("button",{className:"text-neutral-400 p-2 hover:bg-red-100 hover:text-red-500 text-lg rounded-full transition-colors ease-in-out duration-200",type:"button",onClick:g,children:e.jsx(L,{})})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{wordCount:s}),e.jsx("button",{type:"submit",className:"w-24 max-sm:text-sm text-base bg-green-500 px-4 py-1 rounded-full font-medium text-white disabled:bg-green-700 disabled:text-neutral-200 hover:bg-green-600 transition-colors ease-in-out duration-200",disabled:(s==null?void 0:s.length)===0,children:f})]})]})]})]})}),e.jsx("div",{className:" w-[30px] h-[60px] aspect-video rounded-tl-full rounded-bl-full bg-green-500/70 pl-4"})]})},G=()=>{var u;const i=h(N),[n]=T(),o=h(y),{data:t,isSuccess:r,isLoading:c}=S(void 0,{pollingInterval:6e4,refetchOnFocus:!0,refetchOnMountOrArgChange:!0}),d=async s=>{try{const a=await n({tweetId:s})}catch(a){console.log({error:a})}};let l;if((t==null?void 0:t.ids.length)===0&&(l=e.jsx(R,{})),c&&(l=e.jsx(F,{})),r&&((u=t==null?void 0:t.ids)==null?void 0:u.length)>0){const{ids:s}=t;l=s.map(a=>e.jsx(Q,{tweetId:a,handleSaveTweet:d,isSaved:o==null?void 0:o.includes(a)},a))}return e.jsxs("div",{className:"flex flex-col gap-y-8 items-start justify-start w-full",children:[e.jsxs("div",{className:"md:hidden flex w-full items-center justify-between",children:[e.jsx(M,{}),e.jsx(C,{})]}),i?e.jsx(A,{}):"",e.jsxs("section",{className:"w-full flex flex-col gap-y-4",children:[e.jsx(z,{}),l]})]})};export{G as default};
