import{r as m,j as s,g as i,J as f,U as j,_ as x,i as N,K as h,M as p,o as v,k as b}from"./index-B8Mj0rHR.js";import{b as g,c as F}from"./index-BUbBMxyp.js";const d=(a,e)=>a==null?void 0:a.followings.some(l=>Object.keys(l).some(t=>l.hasOwnProperty(t)&&l[t]===e)),y=(a,e)=>{const l=d(a,e),[t,o]=m.useState(l);return m.useEffect(()=>{const c=d(a,e);o(c)},[e,l]),[t,o]},C=()=>s.jsxs("article",{className:"w-full flex items-start justify-between animate-pulse px-3 py-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("p",{className:"w-[4.5rem] aspect-square rounded-full bg-neutral-300 p-1"}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("p",{className:"w-32 aspect-auto bg-neutral-300 h-6"}),s.jsx("p",{className:"w-56 aspect-auto bg-neutral-300 h-5"})]})]}),s.jsx("div",{children:s.jsx("button",{className:"w-24 h-8 bg-neutral-300 rounded"})})]}),k=({userId:a,followUser:e})=>{const l=i(t=>f(t,a));return m.useEffect(()=>{(async()=>{try{await e(a)}catch(o){console.log(o)}})()},[a]),s.jsx("article",{className:"bg-neutral-50 shadow-lg rounded-lg border flex flex-col items-center divide-y-2 text-sm",children:s.jsxs("div",{className:"flex flex-col items-center gap-4 p-4",children:[s.jsx("div",{className:"w-20",children:s.jsx(j,{className:"avatar",userName:l==null?void 0:l.userName})}),s.jsx("div",{children:s.jsxs("p",{className:" font-light",children:["You are now following"," ",s.jsx("span",{className:"px-1 text-neutral-700 font-semibold",children:l==null?void 0:l.fullName}),s.jsxs("span",{className:"font-medium text-neutral-500",children:["@",l==null?void 0:l.userName]})]})})]})})},S=({userId:a,t:e,unFollowUser:l,setIsFollowing:t})=>{const o=i(r=>f(r,a)),c=async()=>{try{t(!1),await l(a),x.dismiss(e.id)}catch(r){console.log(r)}};return s.jsxs("article",{className:"bg-neutral-50 shadow-lg rounded-lg border flex flex-col items-center divide-y-2 text-sm",children:[s.jsxs("div",{className:"flex flex-col items-center gap-2 p-4",children:[s.jsx("div",{className:"w-20",children:s.jsx(j,{className:"avatar",userName:o==null?void 0:o.userName})}),s.jsx("div",{children:s.jsxs("p",{className:" font-light",children:["Are you sure you want to unfollow"," ",s.jsxs("span",{className:"font-medium",children:[o==null?void 0:o.userName,"?"]})," "]})})]}),s.jsx("button",{className:"p-2 w-full font-medium text-red-500",onClick:c,children:"Unfollow"}),s.jsx("button",{className:"p-2 w-full font-medium text-neutral-700",onClick:()=>x.dismiss(e.id),children:"Cancel"})]})},M=({userId:a})=>{const e=i(N),[l,t]=m.useState(d(e,a)),[o]=h(),[c]=p(),r=async()=>{try{t(!0),x.custom(n=>s.jsx(k,{t:n,followUser:o,userId:a}))}catch(n){console.log(n)}},w=async()=>{try{x.custom(n=>s.jsx(S,{t:n,unFollowUser:c,userId:a,setIsFollowing:t}))}catch(n){console.log(n)}};return(e==null?void 0:e._id)!==a&&(l?s.jsxs("button",{onClick:w,className:"user-button",children:[s.jsx("span",{children:s.jsx(g,{})}),s.jsx("span",{className:"w-fit",children:"Following"})]}):s.jsxs("button",{onClick:r,className:"user-button",children:[s.jsx("span",{children:s.jsx(F,{})}),s.jsx("span",{className:"w-fit",children:"Follow"})]}))},u=({text:a,className:e,total:l,colReverse:t})=>s.jsxs("span",{className:`flex ${t?"flex-col-reverse":"flex-col"} items-center`,children:[s.jsx("p",{className:"text-neutral-500 capitalize",children:a}),s.jsx("p",{className:e,children:l})]}),_=({userId:a})=>{const e=i(c=>f(c,a)),l=i(N),[t,o]=y(l,a);return e?s.jsxs("article",{className:"w-full flex sm:items-start items-center justify-between px-1 py-6 cursor-default transition-transform ease-in-out duration-200",children:[s.jsxs("div",{className:"flex items-center gap-4 md:gap-8",children:[s.jsx("div",{className:"w-12 md:w-[4.5rem] aspect-square rounded-full bg-neutral-200 border border-neutral-400",children:s.jsx(j,{className:"avatar",userName:e==null?void 0:e.userName})}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsxs("div",{className:"flex gap-x-1 flex-col sm:flex-row",children:[s.jsx(v,{className:"user-fullName",fullName:e==null?void 0:e.fullName}),s.jsx(b,{className:"userName",userName:`${e==null?void 0:e.userName}`})]}),s.jsxs("div",{className:"flex items-center gap-3 md:text-sm text-xs max-sm:hidden",children:[s.jsx(u,{text:"tweets",className:"userInfo",total:e==null?void 0:e.tweetsCount,colReverse:!1}),s.jsx(u,{text:"followers",className:"userInfo",total:e==null?void 0:e.followersCount,colReverse:!1}),s.jsx(u,{text:"following",className:"userInfo",total:e==null?void 0:e.followingsCount,colReverse:!1})]})]})]}),s.jsx(M,{userId:e==null?void 0:e._id,isFollowing:t,setIsFollowing:o})]}):s.jsx(C,{})};export{_ as S,u as U,M as a,y as u};
